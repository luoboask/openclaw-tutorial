1:"$Sreact.fragment"
2:I[9113,["177","static/chunks/app/layout-9f42c613afe565bb.js"],"GoogleAnalytics"]
3:I[9766,[],""]
4:I[8924,[],""]
6:I[4431,[],"OutletBoundary"]
8:I[5278,[],"AsyncMetadataOutlet"]
a:I[4431,[],"ViewportBoundary"]
c:I[4431,[],"MetadataBoundary"]
d:"$Sreact.suspense"
f:I[7150,[],""]
:HL["/_next/static/css/f2e9a695df47f024.css","style"]
0:{"P":null,"b":"J2DLHHLY_09wgRv01DvBR","p":"","c":["","blog","openclaw-memory-system-deep-dive",""],"i":false,"f":[[["",{"children":["blog",{"children":[["slug","openclaw-memory-system-deep-dive","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f2e9a695df47f024.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"zh-CN","children":[["$","head",null,{"children":[["$","$L2",null,{}],[["$","script",null,{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"WebSite\",\"name\":\"RedClaw\",\"url\":\"https://redclaw.cc\",\"description\":\"基于 OpenClaw 自建设及自维护的知识型网站，分享 AI 助手搭建、配置和使用的实战经验\",\"inLanguage\":\"zh-CN\",\"author\":{\"@type\":\"Organization\",\"name\":\"RedClaw\"}}"}}],["$","script",null,{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"Organization\",\"name\":\"RedClaw\",\"url\":\"https://redclaw.cc\",\"logo\":\"https://redclaw.cc/icon-192x192.png\",\"sameAs\":[\"https://github.com/openclaw/openclaw\",\"https://discord.com/invite/clawd\"],\"description\":\"基于 OpenClaw 自建设及自维护的知识型网站\"}"}}]],["$","link",null,{"rel":"preload","href":"/pagefind/pagefind-ui.css","as":"style"}],["$","link",null,{"rel":"stylesheet","href":"/pagefind/pagefind-ui.css"}]]}],["$","body",null,{"className":"antialiased bg-white text-gray-900","children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","openclaw-memory-system-deep-dive","d"],["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L5",null,["$","$L6",null,{"children":["$L7",["$","$L8",null,{"promise":"$@9"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,[["$","$La",null,{"children":"$Lb"}],null],["$","$Lc",null,{"children":["$","div",null,{"hidden":true,"children":["$","$d",null,{"fallback":null,"children":"$Le"}]}]}]]}],false]],"m":"$undefined","G":["$f",[]],"s":false,"S":true}
10:I[2619,["619","static/chunks/619-ba102abea3e3d0e4.js","953","static/chunks/app/blog/%5Bslug%5D/page-9ebb3b868ebb3594.js"],""]
11:T1cf0,<h1>OpenClaw 记忆系统技术详解</h1>
<p>OpenClaw 的记忆系统是其核心特性之一，它让 AI 助手能够记住对话历史、学习用户偏好，并在多次会话之间保持上下文连贯性。本文将深入解析记忆系统的架构设计和技术实现。</p>
<h2>记忆系统的核心组件</h2>
<h3>1. 会话记忆 (Session Memory)</h3>
<p>每个对话会话都有独立的记忆空间，包括：</p>
<ul>
<li><strong>消息历史</strong>：完整的对话记录，用于上下文理解</li>
<li><strong>工具调用记录</strong>：之前执行过的工具及其结果</li>
<li><strong>临时状态</strong>：当前任务的中间状态</li>
</ul>
<pre><code class="language-typescript">// 会话记忆结构示例
interface SessionMemory {
  sessionId: string;
  messages: Message[];
  toolCalls: ToolCall[];
  metadata: SessionMetadata;
}
</code></pre>
<h3>2. 长期记忆 (Long-term Memory)</h3>
<p>跨会话的记忆存储，包括：</p>
<ul>
<li><strong>用户偏好</strong>：用户常用的命令、喜欢的方式</li>
<li><strong>重要信息</strong>：用户特意让记住的内容</li>
<li><strong>学习到的模式</strong>：从对话中提取的知识</li>
</ul>
<h3>3. 向量记忆 (Vector Memory)</h3>
<p>使用向量数据库存储语义记忆：</p>
<ul>
<li><strong>文档嵌入</strong>：将文档转换为向量表示</li>
<li><strong>语义搜索</strong>：基于含义而非关键词的检索</li>
<li><strong>相似度匹配</strong>：找到相关的历史信息</li>
</ul>
<h2>技术架构</h2>
<h3>存储层</h3>
<pre><code>┌─────────────────────────────────────────────┐
│              Memory Storage                 │
├─────────────────────────────────────────────┤
│  SQLite    │   Vector DB    │   File       │
│  (关系)    │   (语义)       │   (原始)     │
├────────────┼────────────────┼──────────────┤
│  会话元数据 │   文档嵌入     │   大文件     │
│  结构化数据 │   语义索引     │   附件       │
└─────────────────────────────────────────────┘
</code></pre>
<h3>检索机制</h3>
<p>OpenClaw 使用多路召回策略：</p>
<ol>
<li>
<p><strong>关键词搜索 (BM25)</strong></p>
<ul>
<li>基于词频和逆文档频率</li>
<li>适合精确匹配</li>
</ul>
</li>
<li>
<p><strong>向量相似度搜索</strong></p>
<ul>
<li>基于语义嵌入</li>
<li>适合概念相关的内容</li>
</ul>
</li>
<li>
<p><strong>全文搜索 (FTS)</strong></p>
<ul>
<li>数据库级别的文本索引</li>
<li>高性能大文本检索</li>
</ul>
</li>
</ol>
<h2>记忆管理策略</h2>
<h3>自动压缩</h3>
<p>长期记忆会自动压缩和总结：</p>
<pre><code class="language-python"># 伪代码示例
class MemoryCompressor:
    def compress(self, old_memories, threshold=30):
        """当记忆超过阈值天数时进行压缩"""
        for memory in old_memories:
            if memory.age > threshold:
                summary = self.summarize(memory.content)
                memory.content = summary
                memory.is_compressed = True
</code></pre>
<h3>重要性评分</h3>
<p>每条记忆都有重要性评分：</p>
<ul>
<li><strong>High</strong>：用户明确说"记住这个"</li>
<li><strong>Medium</strong>：提取的关键信息</li>
<li><strong>Low</strong>：普通的对话内容</li>
</ul>
<p>系统优先保留高重要性记忆，定期清理低重要性内容。</p>
<h2>实际应用场景</h2>
<h3>场景 1：项目管理助手</h3>
<pre><code>用户：记住我在做一个叫 "OpenClaw 网站" 的项目
Agent：[保存到长期记忆]

三天后...
用户：那个项目怎么样了？
Agent：你说的是 "OpenClaw 网站" 项目吗？根据记录...
</code></pre>
<h3>场景 2：代码助手</h3>
<pre><code>用户：我喜欢用 TypeScript 而不是 JavaScript
Agent：[记录偏好]

之后生成代码时...
Agent：基于你之前的偏好，我用 TypeScript 来写...
</code></pre>
<h3>场景 3：个人助理</h3>
<pre><code>用户：我每周五下午 3 点有团队例会
Agent：[提取并存储结构化信息]

每周五上午...
Agent：提醒：今天下午 3 点有团队例会
</code></pre>
<h2>配置文件</h2>
<p>在 <code>config.yaml</code> 中配置记忆系统：</p>
<pre><code class="language-yaml">memory:
  enabled: true
  
  # 会话记忆
  session:
    max_messages: 50        # 单会话最大消息数
    context_window: 16000   # 上下文窗口大小
  
  # 长期记忆
  long_term:
    storage_path: ./memory
    auto_compress_days: 30  # 自动压缩天数
    importance_threshold: 0.5
  
  # 向量记忆
  vector:
    enabled: true
    model: text-embedding-3-small
    dimensions: 1536
    similarity_threshold: 0.7
</code></pre>
<h2>最佳实践</h2>
<h3>1. 明确指令</h3>
<p>告诉 Agent 什么是重要的：</p>
<ul>
<li>✅ "记住这个，很重要"</li>
<li>✅ "记住我的 API Key"</li>
<li>❌ 期待 Agent 自动判断所有事情的重要性</li>
</ul>
<h3>2. 定期整理</h3>
<ul>
<li>每周回顾一次 MEMORY.md</li>
<li>删除过时的信息</li>
<li>更新变化的内容</li>
</ul>
<h3>3. 分类存储</h3>
<p>使用不同的文件分类记忆：</p>
<pre><code>memory/
├── personal/          # 个人信息
├── projects/          # 项目相关
├── preferences/       # 偏好设置
├── daily/            # 每日记录
└── learnings/        # 学习笔记
</code></pre>
<h2>性能优化</h2>
<h3>检索优化</h3>
<ul>
<li><strong>索引策略</strong>：为常用查询字段建立索引</li>
<li><strong>缓存机制</strong>：热点数据内存缓存</li>
<li><strong>分片存储</strong>：大数据量时分片处理</li>
</ul>
<h3>存储优化</h3>
<ul>
<li><strong>压缩存储</strong>：文本使用 gzip 压缩</li>
<li><strong>定期归档</strong>：旧数据归档到冷存储</li>
<li><strong>增量更新</strong>：只存储变化的部分</li>
</ul>
<h2>常见问题</h2>
<p><strong>Q: 记忆会占用多少存储空间？</strong></p>
<p>A: 取决于使用频率，一般每月 10-50MB。可以配置自动清理策略。</p>
<p><strong>Q: 敏感信息如何保护？</strong></p>
<p>A: 可以配置加密存储，或者将敏感信息标记为不在记忆中存储。</p>
<p><strong>Q: 如何清除特定记忆？</strong></p>
<p>A: 直接告诉 Agent "忘记 XXX"，或者手动编辑记忆文件。</p>
<p><strong>Q: 记忆系统支持哪些数据库？</strong></p>
<p>A: 默认使用 SQLite，也支持 PostgreSQL、ChromaDB 等。</p>
<h2>总结</h2>
<p>OpenClaw 的记忆系统通过多层架构（会话记忆、长期记忆、向量记忆）和智能检索机制，为 AI 助手提供了强大的记忆能力。合理配置和使用记忆系统，可以显著提升助手的实用性和个性化程度。</p>
<p>记忆系统的核心设计哲学是：<strong>记住该记住的，忘记该忘记的，在需要时准确回忆</strong>。这让 AI 助手既能保持上下文的连贯性，又不会因为信息过载而影响性能。</p>
5:["$","div",null,{"className":"min-h-screen bg-gradient-to-b from-slate-50 to-white","children":["$","div",null,{"className":"max-w-4xl mx-auto px-4 py-12","children":[["$","$L10",null,{"href":"/blog","className":"text-gray-600 hover:text-red-600 mb-8 block","children":"← 返回博客"}],["$","article",null,{"className":"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden","children":[["$","div",null,{"className":"bg-gradient-to-br from-red-600 to-red-800 p-12 text-white","children":[["$","div",null,{"className":"flex items-center gap-4 mb-4 text-sm opacity-90","children":[["$","span",null,{"children":"2026-02-27"}],["$","span",null,{"children":"15 分钟"}]]}],["$","h1",null,{"className":"text-3xl font-bold","children":"OpenClaw 记忆系统技术详解"}]]}],["$","div",null,{"className":"p-8 md:p-12 prose prose-lg max-w-none","dangerouslySetInnerHTML":{"__html":"$11"}}]]}]]}]}]
b:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","2",{"name":"theme-color","content":"#dc2626"}]]
7:null
12:I[622,[],"IconMark"]
9:{"metadata":[["$","title","0",{"children":"RedClaw - 基于OpenClaw自建设及自维护的知识型网站"}],["$","meta","1",{"name":"description","content":"RedClaw 是一个基于 OpenClaw 自建设及自维护的知识型网站，分享 AI 助手搭建、配置和使用的实战经验与深度教程"}],["$","meta","2",{"name":"author","content":"RedClaw"}],["$","link","3",{"rel":"manifest","href":"/manifest.json","crossOrigin":"$undefined"}],["$","meta","4",{"name":"keywords","content":"RedClaw, OpenClaw, AI, 自托管, 知识库, 教程, Agent, Skill"}],["$","meta","5",{"name":"robots","content":"index, follow"}],["$","meta","6",{"name":"googlebot","content":"index, follow"}],["$","link","7",{"rel":"canonical","href":"https://redclaw.cc/"}],["$","meta","8",{"property":"og:title","content":"RedClaw - 基于OpenClaw自建设及自维护的知识型网站"}],["$","meta","9",{"property":"og:description","content":"分享 AI 助手搭建、配置和使用的实战经验与深度教程"}],["$","meta","10",{"property":"og:site_name","content":"RedClaw"}],["$","meta","11",{"property":"og:locale","content":"zh_CN"}],["$","meta","12",{"property":"og:type","content":"website"}],["$","meta","13",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","14",{"name":"twitter:title","content":"RedClaw - 基于OpenClaw自建设及自维护的知识型网站"}],["$","meta","15",{"name":"twitter:description","content":"分享 AI 助手搭建、配置和使用的实战经验与深度教程"}],["$","link","16",{"rel":"icon","href":"/icon-192x192.png"}],["$","link","17",{"rel":"apple-touch-icon","href":"/icon-192x192.png"}],["$","$L12","18",{}]],"error":null,"digest":"$undefined"}
e:"$9:metadata"
